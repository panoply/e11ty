var I=Object.create;var y=Object.defineProperty;var k=Object.getOwnPropertyDescriptor;var K=Object.getOwnPropertyNames;var O=Object.getPrototypeOf,D=Object.prototype.hasOwnProperty;var F=(r,t)=>{for(var e in t)y(r,e,{get:t[e],enumerable:!0})},A=(r,t,e,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of K(t))!D.call(r,s)&&s!==e&&y(r,s,{get:()=>t[s],enumerable:!(i=k(t,s))||i.enumerable});return r};var C=(r,t,e)=>(e=r!=null?I(O(r)):{},A(t||!r||!r.__esModule?y(e,"default",{value:r,enumerable:!0}):e,r)),N=r=>A(y({},"__esModule",{value:!0}),r);var u=(r,t,e)=>new Promise((i,s)=>{var o=n=>{try{p(e.next(n))}catch(c){s(c)}},f=n=>{try{p(e.throw(n))}catch(c){s(c)}},p=n=>n.done?i(n.value):Promise.resolve(n.value).then(o,f);p((e=e.apply(r,t)).next())});var H={};F(H,{sprite:()=>z});module.exports=N(H);var x=C(require("fast-glob")),S=require("fs"),d=require("fs/promises"),a=require("path"),V=C(require("svg-sprite")),E=C(require("vinyl"));var q=Object.assign||((r,t)=>(t&&Object.keys(t).forEach(e=>r[e]=t[e]),r)),$=(r,t,e)=>{let i=typeof e;if(e&&i==="object")if(Array.isArray(e))for(let s of e)t=$(r,t,s);else for(let s of Object.keys(e)){let o=e[s];typeof o=="function"?t[s]=o(t[s],m):o===void 0?r&&!isNaN(s)?t.splice(s,1):delete t[s]:o===null||typeof o!="object"||Array.isArray(o)?t[s]=o:typeof t[s]=="object"?t[s]=o===t[s]?o:m(t[s],o):t[s]=$(!1,{},o)}else i==="function"&&(t=e(t,m));return t},m=(r,...t)=>{let e=Array.isArray(r);return $(e,e?r.slice():q({},r),t)},P=m;function B(r){return u(this,null,function*(){try{return yield(0,d.access)(r),!0}catch(t){return!1}})}function L(r,t){return u(this,null,function*(){try{let e=(0,a.dirname)(r);(yield B(e))||(yield(0,d.mkdir)(e,{recursive:!0})),yield(0,d.writeFile)(r,t)}catch(e){throw new Error(e)}})}function M(r){let t=Object.create(null),e=(0,a.resolve)(r.inputPath),i=r.outputPath?(0,a.resolve)(r.outputPath):null,{spriteShortCode:s,spriteConfig:o,inputPath:f}=r;function p(){return u(this,null,function*(){let n=yield(0,x.default)("**/*.svg",{cwd:e}),c=n.map(l=>`${l}:${(0,S.statSync)((0,a.join)(e,l)).mtimeMs}`).join("|");if(s in t){if(t[s].cacheKey===c)return t[s].spriteContent;t[s].cacheKey=c}else t[s]={cacheKey:c};let g=new V.default(o);n.forEach(l=>{let w=(0,a.join)(e,l),b=new E.default({path:(0,a.join)(e,l),base:e,contents:(0,S.readFileSync)(w)});g.add(b)});function v(l){return u(this,null,function*(){return new Promise((w,b)=>g.compile(l,(j,G)=>{if(j)return b(j);w(G.symbol.sprite)}))})}let h=yield v(o.mode);i&&(console.info(`[svg-sprite] Writing ${i} from ${f}`),yield L(i,h.contents.toString("utf8"))),t[s].spriteContent=['<div style="width: 0; height: 0; position: absolute; overflow: hidden;">',h.contents.toString("utf8"),"</div>"].join("")})}return{compile:p,getSprite:(n=s)=>t[n].spriteContent}}var W=0;function z(r,t){if(!t)return;Array.isArray(t)||(t=[t]);let e=[];for(let i of t){if(!i.inputPath)throw new Error("[svg-sprite] inputPath must be specified in plugin options");let s=P({inputPath:"",outputPath:"",globalClass:"",defaultClass:"",spriteShortCode:"sprite",svgShortCode:"svg",spriteConfig:{mode:{symbol:{inline:!0,sprite:"sprite.svg",example:!1}},shape:{transform:["svgo"],id:{generator:"svg-%s"}},svg:{xmlDeclaration:!1,doctypeDeclaration:!1}}},i);if(e.includes(s.spriteShortCode))throw new Error("[svg-sprite] illegal to have duplicate svgSpriteShortcode in config list");e.push(s.spriteShortCode);let o=M(s);r.on("eleventy.before",()=>u(this,null,function*(){yield o.compile()})),r.addShortcode(s.spriteShortCode,()=>o.getSprite(s.spriteShortCode)||""),r.addShortcode(s.svgShortCode,(f,p,n)=>{if(!f)throw new Error("[svg-sprite] name of SVG must be specified");let c=f,g=`${s.globalClass} ${p||s.defaultClass}`,v=n||`${c} icon`,h=(W++).toString(36);return[`<svg class="${g}" aria-labelledby="symbol-${c}-desc-${h}" role="group">`,`<desc id="symbol-${c}-desc-${h}">${v}</desc>`,`<use xlink:href="#svg-${c}"></use>`,"</svg>"].join("")})}}0&&(module.exports={sprite});
